@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── CSS Custom Properties (Light / Dark) ──────────────────────── */
:root {
  --surface-0: #ffffff;
  --surface-1: #f8fafc;
  --surface-2: #f1f5f9;
  --surface-3: #e2e8f0;
  --border:    #e2e8f0;
  --text-primary:   #0f172a;
  --text-secondary: #475569;
  --text-muted:     #94a3b8;
  --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.1);
  --shadow-card-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
}

.dark {
  --surface-0: #1e293b;
  --surface-1: #0f172a;
  --surface-2: #1e293b;
  --surface-3: #334155;
  --border:    #334155;
  --text-primary:   #f1f5f9;
  --text-secondary: #94a3b8;
  --text-muted:     #64748b;
  --shadow-card: 0 4px 6px -1px rgba(0,0,0,0.4);
  --shadow-card-lg: 0 10px 15px -3px rgba(0,0,0,0.4);
}

@layer base {
  * {
    @apply box-border;
  }

  html {
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  body {
    @apply bg-gray-50 dark:bg-slate-900 text-gray-900 dark:text-slate-100 antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    font-weight: 400;
    font-size: 16px;
    line-height: 1.6;
    letter-spacing: -0.011em;
    overflow-x: hidden;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.022em;
    color: var(--text-primary);
  }

  h1 { font-size: 2.5rem; font-weight: 800; }
  h2 { font-size: 2rem; font-weight: 700; }
  h3 { font-size: 1.5rem; font-weight: 600; }
  h4 { font-size: 1.25rem; font-weight: 600; }
  h5 { font-size: 1.125rem; font-weight: 600; }
  h6 { font-size: 1rem; font-weight: 600; }

  p {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 400;
    line-height: 1.6;
    letter-spacing: -0.011em;
  }

  button, input, select, textarea {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    letter-spacing: -0.011em;
  }

  html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
  }

  ::-webkit-scrollbar { @apply w-2 h-2; }
  ::-webkit-scrollbar-track { @apply bg-gray-100 dark:bg-slate-800; }
  ::-webkit-scrollbar-thumb { @apply bg-gray-400 dark:bg-slate-600 rounded; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-primary dark:bg-primary-400; }
}

@layer components {
  .spinner {
    @apply inline-block w-5 h-5 border-[3px] border-primary/30 border-t-primary rounded-full animate-spin;
  }

  .spinner-small {
    @apply inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin;
  }

  /* ── Card ──────────────────────────────────────────── */
  .card {
    @apply bg-white dark:bg-slate-800 rounded-xl shadow-card p-4 sm:p-6
           border border-transparent dark:border-slate-700
           transition-colors duration-300;
  }

  @media (max-width: 640px) {
    .card { @apply rounded-lg; }
  }

  /* ── Buttons ───────────────────────────────────────── */
  .btn {
    @apply px-4 py-2 rounded-lg font-semibold transition-all duration-200 inline-flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed no-select;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 600;
    font-size: 0.9375rem;
    line-height: 1.5;
    letter-spacing: -0.011em;
    min-height: 40px;
  }

  @media (max-width: 640px) {
    .btn { @apply text-sm px-3 py-2; }
  }

  .btn-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-600 text-white hover:from-primary-600 hover:to-primary-700 hover:shadow-lg active:scale-95 shadow-md;
  }

  .btn-secondary {
    @apply bg-white dark:bg-slate-700 text-primary-600 dark:text-primary-400 border-2 border-primary-500 hover:bg-primary-500 hover:text-white active:scale-95;
  }

  .btn-success {
    @apply bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 hover:shadow-lg active:scale-95 shadow-md;
  }

  .btn-danger {
    @apply bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 hover:shadow-lg active:scale-95 shadow-md;
  }

  /* ── Inputs ────────────────────────────────────────── */
  .input {
    @apply w-full px-4 py-2.5
           bg-white dark:bg-slate-800
           border-2 border-gray-200 dark:border-slate-600
           text-gray-900 dark:text-slate-100
           placeholder-gray-400 dark:placeholder-slate-500
           rounded-lg focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20
           transition-all font-sans;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 400;
    font-size: 16px;
    line-height: 1.5;
    letter-spacing: -0.011em;
  }

  @media (max-width: 640px) {
    .input { @apply px-3 py-2; }
  }

  .input-auth {
    @apply w-full pl-12 pr-4 py-3 sm:py-4
           bg-white dark:bg-slate-800
           border-2 border-gray-200 dark:border-slate-600
           text-gray-900 dark:text-slate-100
           placeholder-gray-400 dark:placeholder-slate-500
           rounded-xl focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20
           hover:border-gray-300 dark:hover:border-slate-500
           transition-all text-sm sm:text-base font-medium;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 500;
    line-height: 1.5;
    letter-spacing: -0.011em;
  }

  .input-auth-error {
    @apply border-red-500 focus:border-red-500 focus:ring-red-500/20 bg-red-50 dark:bg-red-900/20;
  }

  /* ── Badges ────────────────────────────────────────── */
  .badge {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 600;
    font-size: 0.8125rem;
    line-height: 1.4;
    letter-spacing: -0.006em;
  }

  .badge-food { @apply bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300; }
  .badge-travel { @apply bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300; }
  .badge-shopping { @apply bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300; }
  .badge-bills { @apply bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300; }
  .badge-entertainment { @apply bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300; }
  .badge-healthcare { @apply bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300; }
  .badge-education { @apply bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300; }
  .badge-other { @apply bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-slate-300; }
}

@layer utilities {
  .text-balance { text-wrap: balance; }
  .safe-area-top { padding-top: max(env(safe-area-inset-top), 0.5rem); }
  .safe-area-bottom { padding-bottom: max(env(safe-area-inset-bottom), 0.5rem); }
  .safe-area-left { padding-left: max(env(safe-area-inset-left), 0.5rem); }
  .safe-area-right { padding-right: max(env(safe-area-inset-right), 0.5rem); }

  .container-responsive { @apply w-full mx-auto px-4 sm:px-6 lg:px-8; }
  .tap-target { @apply min-h-[44px] min-w-[44px]; }

  @media (max-width: 640px) {
    .tap-target { @apply min-h-[40px] min-w-[40px]; }
  }

  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar { display: none; }

  .grid-responsive { @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-5 md:gap-6; }
  .grid-responsive-2 { @apply grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5 md:gap-6; }

  .text-responsive-xs { @apply text-xs sm:text-sm; }
  .text-responsive-sm { @apply text-sm sm:text-base; }
  .text-responsive-base { @apply text-base sm:text-lg; }
  .text-responsive-lg { @apply text-lg sm:text-xl md:text-2xl; }
  .text-responsive-xl { @apply text-xl sm:text-2xl md:text-3xl; }

  @keyframes slide-up {
    from { transform: translateY(100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-slide-up { animation: slide-up 0.3s ease-out; }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .animate-fade-in { animation: fade-in 0.3s ease-out; }

  @keyframes blob {
    0%, 100% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(20px, -20px) scale(1.1); }
    50% { transform: translate(-20px, 20px) scale(0.9); }
    75% { transform: translate(20px, 10px) scale(1.05); }
  }

  .animate-blob { animation: blob 7s ease-in-out infinite; }
  .animation-delay-2000 { animation-delay: 2s; }
  .animation-delay-3000 { animation-delay: 3s; }
  .animation-delay-4000 { animation-delay: 4s; }

  @keyframes float {
    0%, 100% { transform: translateY(0px) translateX(0px); }
    25% { transform: translateY(-20px) translateX(10px); }
    50% { transform: translateY(-40px) translateX(-10px); }
    75% { transform: translateY(-20px) translateX(5px); }
  }

  .animate-float { animation: float 6s ease-in-out infinite; }
  .animation-delay-1000 { animation-delay: 1s; }

  .space-responsive { @apply space-y-4 sm:space-y-5 md:space-y-6; }
  .gap-responsive { @apply gap-3 sm:gap-4 md:gap-5 lg:gap-6; }

  /* Dark mode smooth transition for all elements */
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
}

/* ─── Static gradient/purple utilities (kept as-is, still work in dark) ─── */
.gradient-background {
  background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  min-height: 100vh;
  width: 100%;
}

.gradient-purple-blue { background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%); }
.gradient-purple-pink { background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%); }
.gradient-deep-purple { background: linear-gradient(135deg, #3a0ca3 0%, #7209b7 50%, #f72585 100%); }
.gradient-royal-purple { background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%); }

.btn-purple {
  background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  color: white;
  border: none;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
}

.btn-purple:hover {
  background: linear-gradient(135deg, #3a0ca3 0%, #560bad 50%, #d90368 100%);
  box-shadow: 0 6px 20px rgba(67, 97, 238, 0.6);
  transform: translateY(-2px);
}

.btn-purple:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(67, 97, 238, 0.4);
}

.btn-purple-outline {
  background: transparent;
  color: #4361ee;
  border: 2px solid #4361ee;
  transition: all 0.3s ease;
}

.btn-purple-outline:hover {
  background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  color: white;
  border-color: transparent;
  box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
}

.glass-purple {
  background: rgba(67, 97, 238, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(67, 97, 238, 0.2);
}

.card-purple {
  background: linear-gradient(135deg, rgba(67, 97, 238, 0.05) 0%, rgba(114, 9, 183, 0.05) 50%, rgba(247, 37, 133, 0.05) 100%);
  border: 1px solid rgba(67, 97, 238, 0.2);
  transition: all 0.3s ease;
}

.dark .card-purple {
  background: linear-gradient(135deg, rgba(67, 97, 238, 0.15) 0%, rgba(114, 9, 183, 0.15) 50%, rgba(247, 37, 133, 0.15) 100%);
  border-color: rgba(67, 97, 238, 0.3);
}

.card-purple:hover {
  border-color: rgba(67, 97, 238, 0.4);
  box-shadow: 0 8px 24px rgba(67, 97, 238, 0.15);
  transform: translateY(-4px);
}

.text-gradient-purple {
  background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.input-purple:focus {
  border-color: #4361ee;
  box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.1);
}

.badge-purple {
  background: linear-gradient(135deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.875rem;
  font-weight: 600;
}

.progress-purple {
  background: linear-gradient(90deg, #4361ee 0%, #7209b7 50%, #f72585 100%);
  height: 8px;
  border-radius: 9999px;
  transition: width 0.3s ease;
}

@keyframes shimmer-purple {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.shimmer-purple {
  background: linear-gradient(90deg, #4361ee 0%, #7209b7 25%, #f72585 50%, #7209b7 75%, #4361ee 100%);
  background-size: 1000px 100%;
  animation: shimmer-purple 2s infinite;
}

.glow-purple {
  box-shadow: 0 0 20px rgba(67, 97, 238, 0.5), 0 0 40px rgba(114, 9, 183, 0.3);
}

.glow-purple-hover:hover {
  box-shadow: 0 0 30px rgba(67, 97, 238, 0.7), 0 0 60px rgba(114, 9, 183, 0.5);
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.animated-gradient-purple {
  background: linear-gradient(135deg, #4361ee, #7209b7, #f72585, #7209b7, #4361ee);
  background-size: 400% 400%;
  animation: gradient-shift 15s ease infinite;
}

@keyframes float-purple {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  25% { transform: translateY(-25px) rotate(5deg); }
  50% { transform: translateY(-50px) rotate(-5deg); }
  75% { transform: translateY(-25px) rotate(3deg); }
}

.float-purple { animation: float-purple 8s ease-in-out infinite; }

@keyframes pulse-purple {
  0%, 100% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.7); }
  50% { box-shadow: 0 0 0 20px rgba(67, 97, 238, 0); }
}

.pulse-purple { animation: pulse-purple 2s infinite; }

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.8; }
}

.animate-fadeIn { animation: fadeIn 0.3s ease-out forwards; }
.animate-slideUp { animation: slideUp 0.3s ease-out forwards; }
.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
